# Configuration Schema for PV Circularity Simulator
# This schema defines validation rules for the application configuration

database:
  host:
    type: str
    required: true
    non_empty: true
  port:
    type: int
    required: true
    min: 1
    max: 65535
  username:
    type: str
    required: true
    non_empty: true
  password:
    type: str
    required: true
    non_empty: true
  database:
    type: str
    required: true
    non_empty: true
  pool_size:
    type: int
    required: false
    min: 1
    max: 1000
  max_overflow:
    type: int
    required: false
    min: 0
    max: 1000
  echo_sql:
    type: bool
    required: false

api:
  host:
    type: str
    required: true
  port:
    type: int
    required: true
    min: 1
    max: 65535
  debug:
    type: bool
    required: false
  workers:
    type: int
    required: false
    min: 1
    max: 128
  timeout:
    type: int
    required: false
    min: 1
    max: 3600
  cors_enabled:
    type: bool
    required: false

logging:
  level:
    type: str
    required: true
    choices:
      - DEBUG
      - INFO
      - WARNING
      - ERROR
      - CRITICAL
  format:
    type: str
    required: false
    choices:
      - json
      - text
  file:
    type: str
    required: false
    is_path: true
  console_output:
    type: bool
    required: false

simulation:
  cell_design:
    default_efficiency:
      type: float
      required: false
      min: 0.0
      max: 1.0
    temperature_coefficient:
      type: float
      required: false
      min: -1.0
      max: 0.0
    degradation_rate:
      type: float
      required: false
      min: 0.0
      max: 1.0

  module_engineering:
    cells_per_module:
      type: int
      required: false
      min: 1
      max: 144
    default_layout:
      type: str
      required: false
      choices:
        - grid
        - hexagonal
        - custom
    bypass_diodes:
      type: int
      required: false
      min: 0
      max: 10

cache:
  enabled:
    type: bool
    required: false
  backend:
    type: str
    required: false
    choices:
      - redis
      - memcached
      - memory
  host:
    type: str
    required: false
  port:
    type: int
    required: false
    min: 1
    max: 65535
  ttl:
    type: int
    required: false
    min: 0

security:
  authentication:
    enabled:
      type: bool
      required: false
    method:
      type: str
      required: false
      choices:
        - jwt
        - oauth2
        - basic
  encryption:
    enabled:
      type: bool
      required: false
    algorithm:
      type: str
      required: false
      choices:
        - AES256
        - AES128
        - RSA
